<div
  class="container-fluid"
  style="align-content: center; background-color: #f3f5f8;"
>
  <div class="row">
    <div class="col-md-12" style="text-align: center;">
      <h1>Welcome to FoodHub, {{ username }} ðŸ˜Ž</h1>
    </div>
  </div>

  <br />

  <div class="row">
    <div class="col-md-2"></div>

    <div class="col-md-8" style="text-align: center;">
      <h5>View data for the month of</h5>
      <select
        id="month"
        name="month"
        [(ngModel)]="selectedMonth"
        (change)="handlePeriodChange()"
      >
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
        <option value="4">April</option>
        <option value="5">May</option>
        <option value="6">June</option>
        <option value="7">July</option>
        <option value="8">August</option>
        <option value="9">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
      </select>
      <select
        id="year"
        name="year"
        [(ngModel)]="selectedYear"
        (change)="handlePeriodChange()"
      >
        <option value="2020">2020</option>
        <option value="2021">2021</option>
        <option value="2022">2022</option>
      </select>
    </div>

    <div class="col-md-2"></div>
  </div>
  <br />
  <br />

  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8">
      <accordion [isAnimated]="true">
        <accordion-group heading="View New Customers">
          Total new customers: {{ newCustomers.length }}
          <button
            type="button"
            class="btn btn-primary"
            (click)="isCollapsed = !isCollapsed"
            [attr.aria-expanded]="!isCollapsed"
            aria-controls="collapseBasic"
            style="float: right;"
          >
            Show new users
          </button>
          <hr />
          <div id="collapseBasic" [collapse]="isCollapsed" [isAnimated]="true">
            <table *ngIf="newCustomers.length > 0" class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Customer ID</th>
                  <th scope="col">Username</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let customer of newCustomers; index as i">
                  <th scope="row">{{ i + 1 }}</th>
                  <td>
                    {{ customer[0] }}
                  </td>
                  <td>{{ customer[1] }}</td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="newCustomers.length == 0">
              No new users this month! ðŸ˜­
            </div>
          </div>
        </accordion-group>
        <accordion-group heading="View Total Orders">
          Total orders: {{ totalOrders.length }}
          <button
            type="button"
            class="btn btn-primary"
            (click)="isCollapsedOrders = !isCollapsedOrders"
            [attr.aria-expanded]="!isCollapsedOrders"
            aria-controls="collapseBasic"
            style="float: right;"
          >
            Show order details
          </button>
          <hr />
          <div
            id="collapseBasic"
            [collapse]="isCollapsedOrders"
            [isAnimated]="true"
          >
            <table *ngIf="totalOrders.length > 0" class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Order ID</th>
                  <th scope="col">Customer ID</th>
                  <th scope="col">Rider ID</th>
                  <th scope="col">Order Cost</th>
                  <th scope="col">Order Time</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of totalOrders; index as i">
                  <th scope="row">{{ i + 1 }}</th>
                  <td>
                    {{ order[0] }}
                  </td>
                  <td>{{ order[1] }}</td>
                  <td>{{ order[2] }}</td>
                  <td>{{ order[4] }}</td>
                  <td>{{ order[5] }}</td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="totalOrders.length == 0">
              No new orders this month! ðŸ˜­
            </div>
          </div>
        </accordion-group>
        <accordion-group heading="View Total Order Cost">
          <div *ngIf="totalCost[0].total_cost != null">
            Total orders cost: <b>${{ totalCost[0].total_cost }}</b> ðŸ˜„
          </div>
          <div *ngIf="totalCost[0].total_cost == null">
            There were zero orders for this month! ðŸ˜ž
          </div>
        </accordion-group>
      </accordion>
    </div>
    <div class="col-md-2"></div>
  </div>
  <br />
  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
      <div class="row">
        <div class="col-md-3 box">
          <div style="background-color: transparent;" class="inner">
            <button class="btn btn-primary" (click)="seeLocation()">
              See Statistics By Location
            </button>
          </div>
        </div>
        <div class="col-md-3 box">
          <div style="background-color: transparent;" class="inner">
            <button class="btn btn-primary" (click)="seeCustomers()">
              See Statistics Of All Customer
            </button>
          </div>
        </div>
        <div class="col-md-3 box">
          <div style="background-color: transparent;" class="inner">
            <button class="btn btn-primary" (click)="seeFTRiders()">
              See Statistics For Full Time Riders
            </button>
          </div>
        </div>
        <div class="col-md-3 box">
          <div style="background-color: transparent;" class="inner">
            <button class="btn btn-primary" (click)="seePTRiders()">
              See Statistics For Part Time Riders
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-1"></div>
  </div>
  <br />
  <div class="row" *ngIf="showCustomers">
    <div class="col-md-2"></div>

    <div class="col-md-8">
      <h4>Customer Statistics for {{ selectedMonth }}/{{ selectedYear }}</h4>
      <table *ngIf="customers.length > 0" class="table table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Customer ID</th>
            <th scope="col">Total Orders</th>
            <th scope="col">Total Order Cost</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customers; index as i">
            <th>{{ i + 1 }}</th>
            <td>
              {{ customer[2] }}
            </td>
            <td>{{ customer[3] }}</td>
            <td>{{ customer[4] }}</td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="customers.length == 0">
        <alert type="danger">
          <strong>Oh snap!</strong> No data to display for this month! ðŸ˜¢
        </alert>
      </div>
    </div>

    <div class="col-md-2"></div>
  </div>

  <div class="row" *ngIf="showLocation">
    <div class="col-md-2"></div>

    <div class="col-md-8">
      <h4>Location Statistics for {{ selectedMonth }}/{{ selectedYear }}</h4>
      <h4 style="float: right;">
        Filter By Location:
        <select (change)="changeLocation()" [(ngModel)]="currLocation">
          <option value="all" selected="selected">
            All
          </option>
          <option *ngFor="let location of availableLocations">{{
            location
          }}</option>
        </select>
      </h4>
      <table *ngIf="location.length > 0" class="table table-striped">
        <!-- Statistics by location for
        {{
          customers[0][0]
        }}/{{
          customers[0][1]
        }} -->
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Location</th>
            <th scope="col">Time</th>
            <th scope="col">Total Orders</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let location of location; index as i">
            <th scope="row">{{ i + 1 }}</th>
            <td>
              {{ location[0] }}
            </td>
            <td>{{ location[4] }}</td>
            <td>{{ location[3] }}</td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="location.length == 0">
        <alert type="danger">
          <strong>Oh snap!</strong> No data to display for this month! ðŸ˜¢
        </alert>
      </div>
    </div>

    <div class="col-md-2"></div>
  </div>

  <div class="row" *ngIf="showRiders">
    <div class="col-md-2"></div>
    <div class="col-md-8">
      <h4 *ngIf="riderRole">
        Full Time Rider Statistics for {{ selectedMonth }}/{{ selectedYear }}
      </h4>
      <h4 *ngIf="!riderRole">
        Part Time Rider Statistics for {{ selectedMonth }}/{{ selectedYear }}
      </h4>
      <table *ngIf="riders.length > 0" class="table table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Rider ID</th>
            <th scope="col">Total Orders Delivered</th>
            <th scope="col">Total Hours Worked</th>
            <th scope="col">Total Salary Earned</th>
            <th scope="col">Average Delivery Time</th>
            <th scope="col">Number of Ratings</th>
            <th scope="col">Average Rating</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let country of countries; index as i">
            <th scope="row">{{ i + 1 }}</th>
            <td>
              <img
                [src]="
                  'https://upload.wikimedia.org/wikipedia/commons/' +
                  country.flag
                "
                class="mr-2"
                style="width: 20px;"
              />
              {{ country.name }}
            </td>
            <td>{{ country.area | number }}</td>
            <td>{{ country.population | number }}</td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="riders.length == 0">
        <alert type="danger">
          <strong>Oh snap!</strong> No data to display for this month! ðŸ˜¢
        </alert>
      </div>
    </div>
    <div class="col-md-2"></div>
  </div>
</div>
<br />
